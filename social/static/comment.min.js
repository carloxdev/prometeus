var input=null;var galletita=Cookies.get("csrftoken");var url_add_comment=window.location.origin+"/api/comments/add/";$(document).ready(function(){moment.locale("es");input=new CommentsInput()});function CommentsInput(){this.$content=$("#comment_content");this.$object_id=$("#object_id");this.$tag_model=this.$object_id.data("tag-model");this.$button=$("#btn_enviar");this.$user=$("#user");this.$list_comments=$("#list_comments");this.set_Events()}CommentsInput.prototype.set_Events=function(){this.$button.on("click",this,this.click_Enviar)};CommentsInput.prototype.click_Enviar=function(a){obj=a.data;if(obj.$content.val()==""){alertify.alert("Â¡Aviso!","Favor de especificar un comentario")}else{$.ajax({url:url_add_comment,data:{object_type:obj.$tag_model,object_id:obj.$object_id.text(),comment:obj.$content.val()},method:"POST",headers:{"X-CSRFToken":galletita},success:function(b){date=moment(b.fecha).fromNow();obj.add_Comment(obj.$user.text(),b.contenido,date);obj.$content.val("");alertify.success("Se agrego tu comentario con exito")},error:function(b){alertify.error(b.responseJSON.detail)}})}};CommentsInput.prototype.add_Comment=function(a,c,b){var d=$("<div>",{html:"<div class='panel panel-default'><div class='panel-heading'><span class='badge'>"+a+"</span> comento "+b+":</div><div class='panel-body'>"+c+"</div></div>"});this.$list_comments.prepend(d)};