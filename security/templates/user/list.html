{% extends 'master.html' %}

{% load static from staticfiles %}

{% load humanize %}

{% block css %}

    <!-- Own's Styles -->
    <link rel="stylesheet" href="{% static 'user/list.css' %}" />

{% endblock css %}

{% block contenido %}

    <div class="container-fluid">

           <header>
                <h3 class="own-titulo">Administrar Usuarios</h3>
            </header>

            <hr class="own-article-line">

            <nav class="own-article-toolbar">

                <div class="row">

                    <div class="col-xs-12 col-sm-6">
                        <a href="{% url 'security:user_add' %}" class="btn btn-primary visible-xs visible-sm-inline visible-md-inline visible-lg-inline">
                            <i class="fa fa-user-plus" aria-hidden="true"></i>
                            Agregar Usuario
                        </a>
                    </div>

                    <br class="visible-xs">
                    <br class="visible-xs">

                    <form class="col-xs-12 col-sm-6" action="" method="GET">

                        <div class="input-group">
                            <input type="text" class="form-control" name="q" placeholder="escribe texto a buscar" value="{{ request.GET.q }}">

                            <span class="input-group-btn">
                              <button type="submit" id="boton_buscar" class="btn btn-info btn-flat">
                                <span class="glyphicon glyphicon-search" aria-hidden="true"></span>
                                <span class="hidden-xs">Buscar</span>
                              </button>
                            </span>
                        </div>

                    </form>
                </div>
            </nav>

            <br>

            <div class="container-fluid">

                {% if usuarios %}

                    <div class="row own-record-titles">

                        <div class="col-sm-4 col-md-6">USUARIO</div>

                        <div class="col-sm-1 col-md-1">ESTADO</div>

                        <div class="col-sm-3 col-md-2">REGISTRO</div>

                        <div class="col-sm-3 col-md-2">ULTIMO LOGIN</div>

                        <div class="col-sm-1 col-md-1"></div>

                    </div>

                    {% for usuario in usuarios %}

                        <div class="row own-record" >

                            <!-- Clave y Estado -->
                            <div class="visible-xs col-sm-5 own-column-pk {% if usuario.is_active %} own-column-pk-active {% else %} own-column-pk-disable {% endif %}">
                                {{usuario.username}}

                                <span class="own-column-conten pull-right">
                                    {% if usuario.is_active %}
                                        <span class="glyphicon glyphicon-ok-sign own-data-activeicon" aria-hidden="true"></span>
                                    {% else %}
                                        <span class="glyphicon glyphicon-minus-sign own-data-disableicon" aria-hidden="true"></span>
                                    {% endif %}
                                </span>
                            </div>

                            <!-- Clave y Descripcion -->
                            <div class="col-sx-12 col-sm-4 col-md-6 own-column-main own-column--border">

                                <div class="row">
                                    <div class="hidden-xs col-sm-12 col-md-3">
                                        <strong>{{usuario.username|upper}}</strong>
                                    </div>
                                    <div class="col-sx-12 col-sm-12 col-md-7 own-data-second">
                                        {{usuario.get_full_name}}
                                    </div>
                                </div>
                            </div>

                            <!-- Estado -->
                            <div class="hidden-xs col-sm-1 own-column own-column--center own-column--border own-column-estado">
                                <span class="own-column-conten">
                                    {% if usuario.is_active %}
                                        <span class="glyphicon glyphicon-ok-sign own-data-icon-active" aria-hidden="true"></span>
                                    {% else %}
                                        <span class="glyphicon glyphicon-minus-sign own-data-icon-disable" aria-hidden="true"></span>
                                    {% endif %}
                                </span>
                            </div>

                            <!-- Created By -->
                            <div class="col-sx-12 col-sm-3 col-md-2 own-column own-column--border">
                                <span class="own-data-label" >
                                    Registro:
                                </span>
                                <span class="glyphicon glyphicon-calendar own-data-icon" aria-hidden="true"></span>
                                <span class="own-data-normalvalue">
                                    {{usuario.date_joined|date:"d M Y"}}
                                </span>
                            </div>

                            <!-- Last Login -->
                            <div class="col-sx-12 col-sm-3 col-md-2 own-column own-column--border">
                                <span class="own-data-label" >
                                    Ultimo Login:
                                </span>
                                <span class="glyphicon glyphicon-calendar own-data-icon" aria-hidden="true"></span>
                                <span class="own-data-normalvalue">
                                    {{usuario.last_login|timesince}}
                                </span>
                            </div>

                            <!-- Comand -->
                            <a href="{% url 'security:user_edit' 0 %}" class="col-sx-12 col-sm-1 col-md-1 own-column own-comando">

                                <span class="glyphicon glyphicon-edit own-link-icon" aria-hidden="true"></span>
                                <span class="own-data-normalvalue">
                                    Editar
                                </span>
                            </a>

                        </div>

                    {% endfor %}

                    {% if is_paginated %}
                        <div class="text-center">
                            <nav aria-label="Page navigation">
                                <ul class="pagination">
                                    {% if page_obj.has_previous %}
                                        <li>
                                            <a href="?page={{ page_obj.previous_page_number }}" aria-label="Previous">
                                                <span aria-hidden="true">&laquo;</span>
                                            </a>
                                        </li>
                                    {% endif %}
                                    {% for i in paginator.page_range %}
                                        <li {% if page_obj.number == i %} class="active" {% endif %}>
                                            <a href="?page={{i}}">{{ i }}</a>
                                        </li>
                                    {% endfor %}
                                    {% if page_obj.has_next %}
                                        <li>
                                            <a href="?page={{ page_obj.next_page_number }}" aria-label="Next">
                                                <span aria-hidden="true">&raquo;</span>
                                            </a>
                                        </li>
                                    {% endif %}
                                </ul>
                            </nav>
                        </div>
                    {% endif %}

                {% else %}
                    <h3 class="sin-resultados">No se encontraron usuarios</h3>
                {% endif %}

            </div>

    </div>

{% endblock contenido %}

{% block scripts %}

{% endblock scripts %}
